{"mappings":"whBAUgBA,IACd,MAAOC,EAAUC,GAAeC,EAAAC,UAAS,IAClCC,EAAWC,GAAgBH,EAAAC,UAAS,IACpCG,EAAUC,GAAeL,EAAAC,SAAS,IAiCzC,OAAMK,MAAAC,cACH,MAAG,CAACC,UAAU,8DACZ,KAAE,CAACA,UAAU,2BAA0B,oBACvCJ,EAAQE,MAAAC,cACN,MAAG,CAACE,GAAG,4CACL,OAAI,CACHD,UAAU,+BACVE,+BAhBRP,GAAa,SAEPQ,UAAUC,UAAUC,UAAUT,GAEpCU,YAAU,KACRX,GAAa,KACZ,OAYMC,GAEFF,GAASI,MAAAC,cAAK,OAAI,CAACC,UAAU,sBAAqB,WAAMF,MAAAC,cAAAD,MAAAS,SAAA,KAAAT,MAAAC,cAIxD,OAAI,CAACC,UAAU,SAASQ,wBA7C/BC,GAEAA,EAAMC,iBACN,IAAIC,EAASC,EAAAC,iBAAiBJ,EAAMK,QAChCC,GAhBaC,EAgBSL,EAAOM,IAf7B,ycAA0cC,KAC9cF,QAFiBA,EAoBjB,GAFAzB,GAAY,GAERwB,EAAS,CACX,IAAII,QAAiBP,EAAAQ,WAAW,CAC9BC,QAAS,MACTC,OAAQ,UACRC,KAAM,CAAEC,eAAgBb,EAAOM,OAEjCpB,EAAYsB,EAASM,eAErBlC,GAAY,yBA8BL,MAAG,CAACS,UAAU,iDACZ,QAAK,CACJ0B,KAAK,OACL1B,UAAU,kFACV2B,KAAK,MACLC,YAAY,wCAEb,SAAM,CAAC5B,UAAU,qCAAoC,SAGzDV,GAAQQ,MAAAC,cACN,IAAC,CAACE,GAAG,uBAAsB,gCCtExC4B,EAAAC,OAAMhC,MAAAC,cAAEV,EAAG,MAAK0C,SAASC,eAAe","sources":["apps/url-shortener/app.tsx","apps/url-shortener/url-shortener.tsx"],"sourcesContent":["import type { FormEvent, ReactElement } from 'react'\nimport { useState } from 'react'\nimport { m3oRequest, returnFormValues } from '../shared'\n\nfunction validateUrl(value: string) {\n  return /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#]\\S*)?$/i.test(\n    value\n  )\n}\n\nexport function App(): ReactElement {\n  const [hasError, setHasError] = useState(false)\n  const [hasCopied, setHasCopied] = useState(false)\n  const [shortUrl, setShortUrl] = useState('')\n\n  async function handleFormSubmit(\n    event: FormEvent<HTMLFormElement>\n  ): Promise<void> {\n    event.preventDefault()\n    let values = returnFormValues(event.target)\n    let isValid = validateUrl(values.url as string)\n\n    setHasError(false)\n\n    if (isValid) {\n      let response = await m3oRequest({\n        apiName: 'url',\n        method: 'shorten',\n        data: { destinationURL: values.url }\n      })\n      setShortUrl(response.shortURL)\n    } else {\n      setHasError(true)\n    }\n  }\n\n  async function handleCopiedDblClick(): Promise<void> {\n    setHasCopied(true)\n\n    await navigator.clipboard.writeText(shortUrl)\n\n    setTimeout(() => {\n      setHasCopied(false)\n    }, 1000)\n  }\n\n  return (\n    <div className=\"bg-zinc-800 p-10 rounded-lg text-white\">\n      <h1 className=\"text-3xl mb-2 font-bold\">Shorten your URL</h1>\n      {shortUrl ? (\n        <div id=\"url-shortener-result\">\n          <span\n            className=\"block text-2xl text-zinc-400\"\n            onDoubleClick={handleCopiedDblClick}\n          >\n            {shortUrl}\n          </span>\n          {hasCopied && <span className=\"mt-4 block text-xs\">Copied</span>}\n        </div>\n      ) : (\n        <>\n          <form className=\"w-full\" onSubmit={handleFormSubmit}>\n            <div className=\"flex items-center w-full \">\n              <input\n                type=\"text\"\n                className=\"my-6 p-4 mr-4 border-none bg-zinc-700 rounded-md placeholder:text-zinc-600 grow\"\n                name=\"url\"\n                placeholder=\"https://m3o.com\"\n              />\n              <button className=\"bg-indigo-600 p-4 rounded-lg w-44\">Go!</button>\n            </div>\n          </form>\n          {hasError && (\n            <p id=\"url-shortener-error\">Please provide a valid URL</p>\n          )}\n        </>\n      )}\n    </div>\n  )\n}\n","import { render } from 'react-dom'\nimport { App } from './app'\n\nrender(<App />, document.getElementById('root'))\n"],"names":["$bd3e7e01b923415c$export$86fbec116b87613f","hasError","setHasError","$5zoye","useState","hasCopied","setHasCopied","shortUrl","setShortUrl","React","createElement","className","id","onDoubleClick","navigator","clipboard","writeText","setTimeout","Fragment","onSubmit","event","preventDefault","values","$9NkVJ","returnFormValues","target","isValid","value","url","test","response","m3oRequest","apiName","method","data","destinationURL","shortURL","type","name","placeholder","$40uk1","render","document","getElementById"],"version":3,"file":"index.03d46d3e.js.map"}