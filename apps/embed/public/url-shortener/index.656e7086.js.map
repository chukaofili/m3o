{"mappings":"ojBAQgBA,IACd,MAAOC,EAAUC,GAAeC,EAAAC,UAAS,IAClCC,EAAWC,GAAgBH,EAAAC,UAAS,IACpCG,EAAUC,GAAeL,EAAAC,SAAS,IA2BzC,OAAMK,EAAAC,KACH,MAAG,CAACC,UAAU,yDACZ,KAAE,CAACA,UAAU,mCAA0B,qBACvCJ,EAAQE,EAAAC,KACN,MAAG,CAACE,GAAG,uCACL,OAAI,CAACD,UAAU,+BAA+BE,+BAdrDP,GAAa,SAEPQ,UAAUC,UAAUC,UAAUT,GAEpCU,YAAU,KACRX,GAAa,KACZ,eAQwFC,IACpFF,GAASI,EAAAS,IAAK,OAAI,CAACP,UAAU,8BAAqB,iDAIlD,OAAI,CAACA,UAAU,SAASQ,wBAnCDC,GAC9BA,EAAMC,iBACN,IAAIC,EAASC,EAAAC,iBAAiBJ,EAAMK,QAChCC,GAZaC,EAYSL,EAAOM,IAX7B,ycAA0cC,KAAKF,QADlcA,EAgBjB,GAFAzB,GAAY,GAERwB,EAAS,CACX,IAAII,QAAiBP,EAAAQ,WAAW,CAAEC,QAAS,MAAOC,OAAQ,UAAWC,KAAM,CAAEC,eAAgBb,EAAOM,OACpGpB,EAAYsB,EAASM,eAErBlC,GAAY,oBAyBL,MAAG,CAACS,UAAU,4CACZ,QAAK,CACJ0B,KAAK,OACL1B,UAAU,kFACV2B,KAAK,MACLC,YAAY,0BAEb,SAAM,CAAC5B,UAAU,6CAAoC,aAGzDV,GAAQQ,EAAAS,IAAK,IAAC,CAACN,GAAG,+BAAsB,qCCxDnD4B,EAAAC,OAAMhC,EAAAS,IAAElB,EAAG,IAAK0C,SAASC,eAAe","sources":["widgets/url-shortener/app.tsx","widgets/url-shortener/url-shortener.tsx"],"sourcesContent":["import type { FormEvent, ReactElement } from 'react';\nimport { useState } from 'react';\nimport { m3oRequest, returnFormValues } from '../shared'\n\nfunction validateUrl(value: string) {\n  return /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#]\\S*)?$/i.test(value);\n}\n\nexport function App(): ReactElement {\n  const [hasError, setHasError] = useState(false)\n  const [hasCopied, setHasCopied] = useState(false)\n  const [shortUrl, setShortUrl] = useState('')\n\n  async function handleFormSubmit(event: FormEvent<HTMLFormElement>): Promise<void> {\n    event.preventDefault()\n    let values = returnFormValues(event.target)\n    let isValid = validateUrl(values.url as string)\n\n    setHasError(false)\n\n    if (isValid) {\n      let response = await m3oRequest({ apiName: 'url', method: 'shorten', data: { destinationURL: values.url }})\n      setShortUrl(response.shortURL)\n    } else {\n      setHasError(true)\n    }\n  }\n\n  async function handleCopiedDblClick(): Promise<void> {\n    setHasCopied(true)\n\n    await navigator.clipboard.writeText(shortUrl)\n\n    setTimeout(() => {\n      setHasCopied(false)\n    }, 1000);\n  }\n\n  return (\n    <div className=\"bg-zinc-800 p-10 rounded-lg text-white\">\n      <h1 className=\"text-3xl mb-2 font-bold\">Shorten your URL</h1>\n      {shortUrl ? (\n        <div id=\"url-shortener-result\">\n          <span className=\"block text-2xl text-zinc-400\" onDoubleClick={handleCopiedDblClick}>{shortUrl}</span>\n          {hasCopied && <span className=\"mt-4 block text-xs\">Copied</span>}\n        </div>\n      ) : (\n        <>\n          <form className=\"w-full\" onSubmit={handleFormSubmit}>\n            <div className=\"flex items-center w-full \">\n              <input\n                type=\"text\"\n                className=\"my-6 p-4 mr-4 border-none bg-zinc-700 rounded-md placeholder:text-zinc-600 grow\"\n                name=\"url\"\n                placeholder=\"https://m3o.com\"\n              />\n              <button className=\"bg-indigo-600 p-4 rounded-lg w-44\">Go!</button>\n            </div>\n          </form>\n          {hasError && <p id=\"url-shortener-error\">Please provide a valid URL</p>}\n        </>\n      )}  \n    </div>\n  )\n}","import { render } from 'react-dom'\nimport { App } from './app'\n\nrender(<App />, document.getElementById('root'))\n"],"names":["$fd45a8b99e8f4173$export$86fbec116b87613f","hasError","setHasError","$8g8j9","useState","hasCopied","setHasCopied","shortUrl","setShortUrl","$72rW8","jsxs","className","id","onDoubleClick","navigator","clipboard","writeText","setTimeout","jsx","onSubmit","event","preventDefault","values","$bRUNb","returnFormValues","target","isValid","value","url","test","response","m3oRequest","apiName","method","data","destinationURL","shortURL","type","name","placeholder","$duqeB","render","document","getElementById"],"version":3,"file":"index.656e7086.js.map"}