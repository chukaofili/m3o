<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>My First Parcel App</title>
    <!-- <link href="./hello-world.css" rel="stylesheet" /> -->
  </head>
  <body>
    <div class="bg-zinc-800 p-10 rounded-lg text-white font-light">
      <h1 class="text-4xl">ðŸ‘‹ Hello world</h1>
      <form id="hello-world-form">
        <p class="text-zinc-300 mt-4">
          What is the person's name you like to say hello too?
        </p>
        <div class="flex items-center">
          <input
            type="text"
            id="hello-world-input"
            class="my-6 p-4 mr-4 border-none bg-zinc-700"
          />
          <button class="bg-indigo-600 p-4 rounded-lg">Submit</button>
        </div>
      </form>
      <p id="hello-world-result"></p>
    </div>
    <script src="hello-world.tsx"></script>
    <script>
      async function helloWorldCall(name) {
  const response = await fetch(`https://api.m3o.com/v1/helloworld/Call`, {
    method: 'POST',
    body: JSON.stringify({ name }),
    headers: {
      'Content-Type': 'application/json',
      Authorization: `Bearer NmZkYjc1OWMtMjMwNi00OTkyLTk3MzMtNzQ0YWU0NjQ4NDZj`
    }
  })

  const result = await response.json()

  if (response.ok) {
    return result
  }

  return Promise.reject(result)
}

const form = document.getElementById('hello-world-form')
const input = document.getElementById('hello-world-input')
const result = document.getElementById('hello-world-result')

form.onsubmit = async function handleSubmit(event) {
  event.preventDefault()
  const response = await helloWorldCall(input.value)
  result.textContent = response.message
}

      </script>
  </body>
</html>
